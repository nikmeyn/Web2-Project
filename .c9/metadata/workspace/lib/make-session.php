{"filter":false,"title":"make-session.php","tooltip":"/lib/make-session.php","undoManager":{"mark":35,"position":35,"stack":[[{"start":{"row":0,"column":0},"end":{"row":0,"column":1},"action":"insert","lines":["<"],"id":1}],[{"start":{"row":0,"column":1},"end":{"row":0,"column":2},"action":"insert","lines":["?"],"id":2}],[{"start":{"row":0,"column":2},"end":{"row":0,"column":3},"action":"insert","lines":["p"],"id":3}],[{"start":{"row":0,"column":3},"end":{"row":0,"column":4},"action":"insert","lines":["h"],"id":4}],[{"start":{"row":0,"column":4},"end":{"row":0,"column":5},"action":"insert","lines":["p"],"id":5}],[{"start":{"row":0,"column":5},"end":{"row":1,"column":0},"action":"insert","lines":["",""],"id":6},{"start":{"row":1,"column":0},"end":{"row":1,"column":1},"action":"insert","lines":["\\"]}],[{"start":{"row":1,"column":0},"end":{"row":1,"column":1},"action":"remove","lines":["\\"],"id":7}],[{"start":{"row":1,"column":0},"end":{"row":2,"column":0},"action":"insert","lines":["",""],"id":8}],[{"start":{"row":2,"column":0},"end":{"row":3,"column":0},"action":"insert","lines":["",""],"id":9}],[{"start":{"row":3,"column":0},"end":{"row":3,"column":1},"action":"insert","lines":["?"],"id":10}],[{"start":{"row":3,"column":1},"end":{"row":3,"column":2},"action":"insert","lines":[">"],"id":11}],[{"start":{"row":1,"column":0},"end":{"row":34,"column":9},"action":"insert","lines":["$db = new UsersLoginGateway($connection);","        if($_SERVER['REQUEST_METHOD'] == 'POST') {","            if(isset($_COOKIE['user'])) {","                //nothing??","            } else {","                $user = $db->findViaJoin('u');","                foreach($user as $u) {","                    if($_POST['user'] == $u['UserName']) {","                        $userMatch = true;","                        break;","                    } else {","                        $userMatch = false;","                    }                ","                }","                if($userMatch == true) {","                    $hashP = md5($_POST['pword'] . $u['Salt']);","                    foreach($user as $u) {","                        if($u['Password'] == $hashP) {","                            $pMatch = true;","                            setCookie('user', $_POST['user'], 0);","                            break;","                        } else {","                            $pMatch = false;","                        }","                    }","                } ","            }","            ","            ","        } else if(isset($_COOKIE['user'])) {","            //nothing??","        } else {","            header('Location: login.php');","        }"],"id":12}],[{"start":{"row":1,"column":0},"end":{"row":1,"column":4},"action":"insert","lines":["    "],"id":14}],[{"start":{"row":33,"column":30},"end":{"row":33,"column":31},"action":"insert","lines":["."],"id":16}],[{"start":{"row":33,"column":31},"end":{"row":33,"column":32},"action":"insert","lines":["."],"id":17}],[{"start":{"row":33,"column":32},"end":{"row":33,"column":33},"action":"insert","lines":["/"],"id":18}],[{"start":{"row":33,"column":37},"end":{"row":33,"column":38},"action":"remove","lines":["n"],"id":19}],[{"start":{"row":33,"column":36},"end":{"row":33,"column":37},"action":"remove","lines":["i"],"id":20}],[{"start":{"row":33,"column":35},"end":{"row":33,"column":36},"action":"remove","lines":["g"],"id":21}],[{"start":{"row":33,"column":34},"end":{"row":33,"column":35},"action":"remove","lines":["o"],"id":22}],[{"start":{"row":33,"column":33},"end":{"row":33,"column":34},"action":"remove","lines":["l"],"id":23}],[{"start":{"row":33,"column":33},"end":{"row":33,"column":34},"action":"insert","lines":["u"],"id":24}],[{"start":{"row":33,"column":34},"end":{"row":33,"column":35},"action":"insert","lines":["s"],"id":25}],[{"start":{"row":33,"column":35},"end":{"row":33,"column":36},"action":"insert","lines":["e"],"id":26}],[{"start":{"row":33,"column":36},"end":{"row":33,"column":37},"action":"insert","lines":["r"],"id":27}],[{"start":{"row":33,"column":37},"end":{"row":33,"column":38},"action":"insert","lines":["P"],"id":28}],[{"start":{"row":33,"column":38},"end":{"row":33,"column":39},"action":"insert","lines":["r"],"id":29}],[{"start":{"row":33,"column":39},"end":{"row":33,"column":40},"action":"insert","lines":["o"],"id":30}],[{"start":{"row":33,"column":40},"end":{"row":33,"column":41},"action":"insert","lines":["f"],"id":31}],[{"start":{"row":33,"column":41},"end":{"row":33,"column":42},"action":"insert","lines":["i"],"id":32}],[{"start":{"row":33,"column":42},"end":{"row":33,"column":43},"action":"insert","lines":["e"],"id":33}],[{"start":{"row":33,"column":43},"end":{"row":33,"column":44},"action":"insert","lines":["l"],"id":34}],[{"start":{"row":33,"column":43},"end":{"row":33,"column":44},"action":"remove","lines":["l"],"id":35}],[{"start":{"row":33,"column":42},"end":{"row":33,"column":43},"action":"remove","lines":["e"],"id":36}],[{"start":{"row":33,"column":42},"end":{"row":33,"column":43},"action":"insert","lines":["l"],"id":37}],[{"start":{"row":33,"column":43},"end":{"row":33,"column":44},"action":"insert","lines":["e"],"id":38}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":1,"column":45},"end":{"row":1,"column":45},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1521224161577,"hash":"035063dbf83793f1ca50cbed7b26e8cb80520da6"}